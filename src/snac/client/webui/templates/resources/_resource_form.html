<form id="resource-form">
    <div class="row">
        <div class="col-md-8">
            <div class="form-horizontal">

                <!-- HIDDEN VALUES-->
                <input name="resources[0][operation]" type="hidden" value="{{ resource_operation }}">
                <!-- <input name="resources[0][documentType_vocabtype]" type="hidden" value="document_type"> -->
                <input name="resources[0][id]" type="hidden" value="{{data.resource.id}}" />
                <input name="resources[0][version]" type="hidden" value="{{data.resource.version}}">
                <input name="resources[0][extent]" type="hidden" value="">

                <div class="form-group required">
                    <label class="control-label col-xs-4" data-content="{{X.resourceDocumentType.tooltip}}" data-toggle="popover"
                        data-placement="top"> {{X.resourceDocumentType.display}} </label>
                    <div class="col-xs-8">
                        <select id="resource-type-select" name="resources[0][documentType][id]" class="form-control" style="width: 100%;"
                            required>
                            <option value="{{data.resource.documentType.id}}" selected>
                                {{data.resource.documentType.term}}</option>
                        </select>
                    </div>
                </div>

                <div class="form-group required">
                    <label class="control-label col-xs-4" data-content="{{X.resourceDisplayEntry.tooltip}}" data-toggle="popover"
                        data-placement="top"> {{X.resourceDisplayEntry.display}} </label>
                    <div class="col-xs-8">
                        <input type="text" name="resources[0][displayEntry]" class="form-control" value="{{data.resource.displayEntry}}"
                            placeholder="Proper name. Title. Date." required>
                    </div>
                </div>

                <div class="form-group required">
                    <label class="control-label col-xs-4" data-content="{{X.resourceTitle.tooltip}}" data-toggle="popover"
                        data-placement="top"> {{X.resourceTitle.display}} </label>
                    <div class="col-xs-8">
                        <input type="text" name="resources[0][title]" class="form-control" value="{{data.resource.title}}" pattern="^((?![hH][tT][tT][pP][sS]?:).)*$" required>
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label col-xs-4" data-content="{{X.resourceDate.tooltip}}" data-toggle="popover"
                        data-placement="top"> {{X.resourceDate.display}} </label>
                    <div class="col-xs-8">
                        <input type="text" name="resources[0][date]" class="form-control" value="{{data.resource.date}}" placeholder="YYYY or YYYY-YYYY">
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label col-xs-4" data-content="{{X.resourceURI.tooltip}}" data-toggle="popover"
                        data-placement="top"> {{X.resourceURI.display}} </label>
                    <div class="col-xs-8">
                        <input type="url" name="resources[0][link]" class="form-control" value="{{data.resource.link}}" placeholder="http://full/URL/path"/>
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label col-xs-4" data-content="{{X.resourceAbstract.tooltip}}" data-toggle="popover"
                        data-placement="top"> {{X.resourceAbstract.display}} </label>
                    <div class="col-xs-8">
                        <textarea name="resources[0][abstract]" class="form-control" rows="3"> {{data.resource.abstract}}</textarea>
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label col-xs-4" data-content="{{X.resourceExtent.tooltip}}" data-toggle="popover"
                        data-placement="top"> {{X.resourceExtent.display}} </label>
                    <div class="col-xs-8">
                        <input type="text" name="resources[0][extent]" class="form-control" value="{{data.resource.extent}}">
                    </div>
                </div>

                <!--  LANGUAGES -->
                <div class="form-group" id="resource-languages">
                    <label class="control-label col-xs-4" data-content="{{X.resourceLanguages.tooltip}}" data-toggle="popover"
                        data-placement="top">
                        {{X.resourceLanguages.display}} </label>
                    <div class="col-xs-8 well well-sm">

                        <!-- Existing Languages   -->
                        {% set lang_count = 0 %} {% for lang in data.resource.languages%}
                            <div class="col-xs-12 panel-default language" id="language_{{lang_count}}" style="padding-top: 5px; padding-bottom: 5px;">
                                <input type="hidden" id="languages_{{lang_count}}[id]" name="resources[0][languages][{{lang_count}}][id]"
                                    value="{{lang.id}}">
                                <input type="hidden" id="languages_{{lang_count}}[version]" name="resources[0][languages][{{lang_count}}][version]"
                                    value="{{lang.version}}">
                                <input type="hidden" class="operation" id="languages_{{lang_count}}[operation]" name="resources[0][languages][{{lang_count}}][operation]"
                                    value="">
                                <input type="hidden" name="resources[0][languages][{{lang_count}}][dataType]" value="Language">
                                <div class="input-group">
                                    <div style="width: 50%">
                                        <select id="language_language_" name="resources[0][languages][{{lang_count}}][language]" data-placeholder="Language"
                                            tabindex="-1">
                                                <option value="{{lang.language.id}}" selected> {{lang.language.term}} </option>
                                        </select>
                                    </div>
                                    <div style="width:50%; clear: none; float: left;">
                                        <select id="language_script_" name="resources[0][languages][{{lang_count}}][script]" data-placeholder="Script"
                                            tabindex="-1">
                                            <option value="{{lang.script.id}}" selected> {{lang.script.term}} </option>
                                        </select>
                                    </div>

                                    <span class="input-group-btn">
                                        <button class="btn btn-danger" onclick="deleteOrUndoLanguage()">
                                            <i class="fa fa-minus-circle"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                            {% set lang_count = lang_count + 1 %}
                        {% endfor %}

                        <div class="add-resource-language"></div>

                        <div class="form-group">
                            <div class="col-xs-12 text-center">
                                <button class="btn btn-success" id="new-resource-language-btn">
                                    <span class="glyphicon glyphicon-plus-sign"></span>
                                    Add Language
                                </button>
                                <button class="btn btn-primary" id="magic-resource-language-btn">
                                    <span class="fa fa-magic"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label col-xs-4">Holding Institution</label>
                    <div class="col-xs-8">
                        <div class="control-label">
                            <a href="{{control.snacURL}}/view/{{data.resource.repository.id}}" target="_blank">
                                {{data.resource.repository.nameEntries[0].original}}
                            </a>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="control-label col-xs-4" data-content="{{X.resourceRepository.tooltip}}" data-toggle="popover"
                        data-placement="top"> {{X.resourceRepository.display}} </label>
                    <div class="col-xs-8">
                        <input type="number" name="resources[0][repo]" class="form-control" value="{{data.resource.repository.id}}"
                            placeholder="(SNAC ID)" />
                        <div class="col-xs-8">
                            <a href="{{control.snacURL}}/search" target="_blank">Open a SNAC Search Window</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4" id="resource-actions">
            <!-- Right Column -->

            <div class="alert alert-01 alert-warning" id="notification-message" style="display: none">
                <p>Saving Resource...</p>
            </div>
            <div class="alert alert-01 alert-success" id="success-message" style="display: none">
                <p>Successfully saved!</p>
            </div>
            <div class="alert alert-01 alert-danger" id="error-message" style="display: none">
                <p>An error occured while saving</p>
            </div>

            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Actions</h3>
                </div>
                <div class="panel-body">
                    <div class="list-group">
                        <button type="submit" class="list-group-item list-group-item-info" id="save-resource-btn">
                            <i class="fa fa-fw fa-floppy-o"></i>
                            Save Resource
                        </button>
                        <a href="#" class="list-group-item list-group-item-danger" id="vocab_dashboard_cancel">
                            <i class="fa fa-fw fa-times-circle"></i>
                            Cancel
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<!-- Language Template   -->
<div id="resource-language-template" data-language-count="{{lang_count}}" data-resource-count="0" style="display: none;">
    <div class="col-xs-12 panel-default language" style="padding-top: 5px; padding-bottom: 5px;">
        <!-- <input type="hidden" name="resources[0][languages][YY][id]" value="">
        <input type="hidden" name="resources[0][languages][YY][version]" value=""> -->
        <input type="hidden" class="operation" name="resources[0][languages][YY][operation]" value="">
        <input type="hidden" name="resources[0][languages][YY][dataType]" value="Language">
        <div class="input-group">
            <div style="width: 50%">
                <select name="resources[0][languages][YY][language]" data-placeholder="Language" tabindex="-1"></select>
            </div>
            <div style="width:50%; clear: none; float: left;">
                <select name="resources[0][languages][YY][script]" data-placeholder="Script" tabindex="-1"></select>
            </div>

            <span class="input-group-btn">
                <button class="btn btn-danger" onclick="deleteOrUndoLanguage()">
                    <i class="fa fa-minus-circle"></i>
                </button>
            </span>
        </div>
    </div>
</div>
